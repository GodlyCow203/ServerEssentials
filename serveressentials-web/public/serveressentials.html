<!doctype html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="utf-8">
    <title>ServerEssentials ‚Äì Downloads & Setup Guide</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --bg: #0a0a0a;
            --surface: #111111;
            --surface-2: #191919;
            --border: #2d2d2d;
            --text: #e0e0e0;
            --text-2: #888888;
            --primary: #FFFFFF;
            --primary-2: #b91c1c;
            --success: #ef4444;
            --warning: #fbbf24;
            --error: #ef4444;
            --gold: #fbbf24;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.5);
            --font: 'Courier New', 'Monaco', 'Consolas', monospace;
            /* Added proper green for success status */
            --status-good: #50DB00;
        }
        [data-theme="light"] {
            --bg: #f0f0f0;
            --surface: #ffffff;
            --surface-2: #f7f7f7;
            --border: #cccccc;
            --text: #1a1a1a;
            --text-2: #555555;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            /* Adjusted for light theme visibility */
            --status-good: #28a000;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; }
        body {
            background: var(--bg);
            color: var(--text);
            font-family: var(--font);
            line-height: 1.5;
            font-size: 14px;
        }

        .topbar {
            background: var(--surface);
            border-bottom: 2px solid var(--border);
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
            font-weight: bold;
        }
        .topbar a {
            color: var(--text-2);
            text-decoration: none;
            transition: color 0.2s;
        }
        .topbar a:hover { color: var(--primary); }
        .topbar .spacer { flex: 1; }
        .theme-btn {
            background: var(--surface-2);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.4rem 0.8rem;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        .theme-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .hero {
            background: linear-gradient(90deg, var(--surface) 0%, var(--surface-2) 100%);
            border-bottom: 2px solid var(--border);
            padding: 3rem 1.5rem;
            text-align: center;
            position: relative;
        }
        .hero h1 {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .hero p {
            font-size: 1rem;
            color: var(--text-2);
            margin-bottom: 1.5rem;
        }
        .hero-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
            flex-wrap: wrap;
        }
        .btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid var(--border);
            background: var(--surface-2);
            color: var(--text);
            text-decoration: none;
            font-weight: bold;
            transition: all 0.2s;
            text-transform: uppercase;
        }
        .btn:hover {
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-1px);
        }
        .btn-primary {
            border-color: var(--primary);
            color: var(--primary);
        }

        .wrapper {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 0;
        }
        @media (max-width: 900px) {
            .wrapper { grid-template-columns: 1fr; }
        }
        main { border-right: 2px solid var(--border); }

        .card {
            background: var(--surface);
            border: none;
            border-bottom: 2px solid var(--border);
        }
        .card-header {
            background: var(--surface-2);
            padding: 1rem 1.5rem;
            font-weight: bold;
            color: var(--primary);
            border-bottom: 1px solid var(--border);
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
        }
        .card-body { padding: 1.5rem; }

        .version-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        .version-changelog {
            background: var(--bg);
            padding: 1rem;
            margin: 1rem 0;
            border: 1px solid var(--border);
            font-family: var(--font);
            font-size: 13px;
            line-height: 1.4;
        }
        .version-changelog hr {
            border: none;
            border-top: 1px dashed var(--border);
            margin: 0.75rem 0;
        }

        .version-grid {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        .version-item {
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            padding: 1rem 1.5rem;
            display: grid;
            grid-template-columns: 2fr 1fr auto;
            align-items: center;
            gap: 1rem;
            transition: background 0.2s;
        }
        .version-item:hover {
            background: var(--surface-2);
        }
        .version-info {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        .version-name {
            font-weight: bold;
            color: var(--text);
        }
        .version-range {
            font-size: 0.85rem;
            color: var(--text-2);
        }
        .version-date {
            font-size: 0.85rem;
            color: var(--text-2);
            text-align: right;
        }
        .download-btn-small {
            background: var(--surface-2);
            border: 1px solid var(--border);
            color: var(--text);
            padding: 0.4rem 0.8rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.2s;
        }
        .download-btn-small:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        .download-counter {
            text-align: center;
            padding: 1rem;
            background: var(--bg);
            border: 2px solid var(--border);
            margin-bottom: 1rem;
        }
        .download-number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
        }
        .download-label {
            font-size: 0.85rem;
            color: var(--text-2);
            text-transform: uppercase;
        }

        .dep-grid {
            display: grid;
            gap: 0.75rem;
        }
        .dep-item {
            background: var(--bg);
            padding: 0.75rem;
            border-left: 3px solid var(--warning);
        }
        .dep-item.required {
            border-left-color: var(--primary);
        }
        .dep-name {
            font-weight: bold;
            color: var(--text);
            margin-bottom: 0.25rem;
        }
        .dep-desc {
            font-size: 0.85rem;
            color: var(--text-2);
        }

        .compat-table {
            width: 100%;
            font-size: 0.85rem;
        }
        .compat-row {
            display: grid;
            grid-template-columns: 1fr 2fr;
            border-bottom: 1px solid var(--border);
            padding: 0.5rem 0;
        }
        .compat-name {
            font-weight: bold;
            color: var(--text);
        }
        .compat-status {
            text-align: right;
        }
        .status-good { color: var(--status-good); }
        .status-warn { color: var(--warning); }
        .status-bad { color: var(--error); }

        .commit-item {
            background: var(--bg);
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border-left: 3px solid var(--primary);
        }
        .commit-message {
            font-weight: bold;
            color: var(--text);
            margin-bottom: 0.25rem;
            font-size: 13px;
        }
        .commit-meta {
            font-size: 0.75rem;
            color: var(--text-2);
        }
        .commit-sha {
            font-family: var(--font);
            color: var(--warning);
        }

        .config-preview {
            background: var(--bg);
            padding: 1rem;
            overflow-x: auto;
            font-size: 11px;
            line-height: 1.3;
            border: 1px solid var(--border);
            max-height: 400px;
            overflow-y: auto;
        }
        .config-preview pre {
            margin: 0;
            white-space: pre;
        }

        .perf-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
        }
        .perf-item {
            background: var(--bg);
            padding: 0.75rem;
            border-left: 3px solid var(--primary);
        }
        .perf-label {
            font-size: 0.75rem;
            color: var(--text-2);
            text-transform: uppercase;
        }
        .perf-value {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary);
        }

        .bstats-img {
            width: 100%;
            height: auto;
            border: 1px solid var(--border);
        }

        .footer {
            background: var(--surface);
            border-top: 2px solid var(--border);
            padding: 2rem;
            text-align: center;
            font-size: 0.9rem;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin-bottom: 1rem;
        }
        .footer-link {
            color: var(--text-2);
            text-decoration: none;
            font-weight: bold;
        }
        .footer-link:hover { color: var(--primary); }
    </style>
</head>
<body>

<header class="topbar">
    <a href="index.html">‚Üê BACK TO HOME</a>
    <a href="https://modrinth.com/plugin/serveressentials" target="_blank">MODRINTH</a>
    <a href="https://github.com/GodlyCow203" target="_blank">GITHUB</a>
    <a href="https://discord.gg/vmhQ2gZr8g" target="_blank">DISCORD</a>
    <div class="spacer"></div>
    <button class="theme-btn" id="themeBtn">üåô DARK</button>
</header>

<section class="hero">
    <h1>ServerEssentials Downloads</h1>
    <p>Latest builds ‚Ä¢ Compatibility ‚Ä¢ Setup guides</p>
    <div class="hero-buttons">
        <a class="btn btn-primary" href="#latest">LATEST BUILD</a>
        <a class="btn" href="#versions">VERSION HISTORY</a>
        <a class="btn" href="#github">GITHUB ACTIVITY</a>
    </div>
</section>

<div class="wrapper">
    <main>
        <div class="card" id="latest">
            <div class="card-header">Latest Stable Build</div>
            <div class="card-body" id="latestVersion">
                <div style="text-align: center; padding: 2rem;">Loading...</div>
            </div>
        </div>

        <div class="card" id="versions">
            <div class="card-header">Version History (Latest 5)</div>
            <div class="card-body">
                <div id="versionList">
                    <div style="text-align: center; padding: 2rem;">Fetching versions...</div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header" onclick="toggleConfig()">‚öôÔ∏è Configuration Preview [CLICK TO EXPAND]</div>
            <div class="card-body" id="config-preview" style="display: none;">
                <div class="config-preview">
                    <pre># Database configurations for each module
# SQLite is used for simplicity - no external server required
databases:
  rtp:
    type: sqlite
    file: rtp.db          # Random teleport data storage
    pool_size: 5          # Database connection pool size

  kits:
    type: sqlite
    file: kits.db         # Kit claim history and cooldowns
    pool_size: 5

  playerdata:
    type: sqlite
    file: playerdata.db   # General player data storage
    pool_size: 5

# TPA Module - Player-to-player teleport requests
tpa:
  settings:
    cooldown: 5           # Seconds between TPA requests (prevents spam)
    timeout: 60           # Seconds before pending request expires
    warmup: 1             # Pre-teleport countdown time (0 = disabled)
    teleport-delay: 3     # Seconds to wait after warmup completes
    cancel-on-move: true  # Cancel if player moves during warmup
    block-move-threshold-blocks: true  # Use block precision for movement detection

  restrictions:
    cross-world: false    # Allow teleport between different worlds
    blocked-worlds:       # Worlds players cannot teleport TO
      - world_nether
      - world_the_end
# ... (full config available after download)</pre>
                </div>
            </div>
        </div>

        <div class="card" id="github">
            <div class="card-header">üêô Recent GitHub Activity</div>
            <div class="card-body" id="github-commits">
                <div style="text-align: center; padding: 2rem;">Loading commits...</div>
            </div>
        </div>

        <div class="card" id="performance">
            <div class="card-header">üìä Performance Impact</div>
            <div class="card-body">
                <div class="perf-grid">
                    <div class="perf-item">
                        <div class="perf-label">Memory Usage</div>
                        <div class="perf-value">~10-40 MB</div>
                    </div>
                    <div class="perf-item">
                        <div class="perf-label">CPU Impact</div>
                        <div class="perf-value">&lt;5% (100 players)</div>
                    </div>
                    <div class="perf-item">
                        <div class="perf-label">Load Time</div>
                        <div class="perf-value">2-5s</div>
                    </div>
                    <div class="perf-item">
                        <div class="perf-label">Database Ops</div>
                        <div class="perf-value">100% Async</div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); font-size: 0.8rem; color: var(--text-2);">
                    All database operations run asynchronously. Zero lag reported on servers with 100+ concurrent players.
                </div>
            </div>
        </div>
    </main>

    <aside class="sidebar">
        <div class="download-counter">
            <div class="download-number" id="totalDownloads">-</div>
            <div class="download-label">Total Downloads</div>
        </div>

        <div class="card">
            <div class="card-header">üìà Usage Statistics</div>
            <div class="card-body">
                <img src="https://bstats.org/signatures/bukkit/ServerEssentials%20v2.svg" alt="ServerEssentials Stats" class="bstats-img">
            </div>
        </div>

        <div class="card">
            <div class="card-header">Dependencies</div>
            <div class="card-body">
                <div class="dep-grid">
                    <div class="dep-item required">
                        <div class="dep-name">Vault</div>
                        <div class="dep-desc">Required for economy, shops, and /balance</div>
                    </div>
                    <div class="dep-item">
                        <div class="dep-name">LuckPerms</div>
                        <div class="dep-desc">Strongly recommended for permissions</div>
                    </div>
                    <div class="dep-item">
                        <div class="dep-name">PlaceholderAPI</div>
                        <div class="dep-desc">Optional: Enables custom placeholders in messages</div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); font-size: 0.8rem; color: var(--text-2);">
                    Without these: Economy disabled, permission issues.
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">Server Compatibility</div>
            <div class="card-body">
                <div class="compat-table">
                    <div class="compat-row">
                        <div class="compat-name">Paper</div>
                        <div class="compat-status status-good">‚úì Fully Supported</div>
                    </div>
                    <div class="compat-row">
                        <div class="compat-name">Spigot</div>
                        <div class="compat-status status-good">‚úì Fully Supported</div>
                    </div>
                    <div class="compat-row">
                        <div class="compat-name">Purpur</div>
                        <div class="compat-status status-good">‚úì Fully Supported</div>
                    </div>
                    <div class="compat-row">
                        <div class="compat-name">Folia</div>
                        <div class="compat-status status-warn">‚ö† Partial Support</div>
                    </div>
                    <div class="compat-row">
                        <div class="compat-name">Fabric/Forge</div>
                        <div class="compat-status status-bad">‚úó Not Compatible</div>
                    </div>
                </div>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); font-size: 0.8rem; color: var(--text-2);">
                    For proxies (Velocity/Waterfall): Install on backend servers only.
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header">Quick Links</div>
            <div class="card-body">
                <ul style="list-style: none; padding: 0;">
                    <li style="margin-bottom: 0.5rem;"><a href="https://modrinth.com/plugin/serveressentials" target="_blank" style="color: var(--primary);">Modrinth Project</a></li>
                    <li style="margin-bottom: 0.5rem;"><a href="https://github.com/GodlyCow203" target="_blank" style="color: var(--primary);">GitHub Repository</a></li>
                    <li style="margin-bottom: 0.5rem;"><a href="discord.html" style="color: var(--primary);">Support Discord</a></li>
                    <li><a href="contact.html" style="color: var(--primary);">Email Support</a></li>
                </ul>
            </div>
        </div>
        <div class="card">
            <div class="card-header">üöÄ Quick Start Guide</div>
            <div class="card-body">
                <ol style="margin-left: 1rem; color: var(--text-2);">
                    <li style="margin-bottom: 0.5rem;">Download the <code>.jar</code> file</li>
                    <li style="margin-bottom: 0.5rem;">Place in your <code>/plugins</code> folder</li>
                    <li style="margin-bottom: 0.5rem;">Restart your server</li>
                    <li style="margin-bottom: 0.5rem;">Edit configs in <code>/plugins/ServerEssentials/</code></li>
                    <li>Run <code>/se reload</code> to apply changes</li>
                </ol>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); font-size: 0.8rem; color: var(--status-good);">
                    ‚úì First-time setup takes under 2 minutes
                </div>
            </div>
        </div>

        <div class="card" style="margin-top: 0.65rem;">
            <div class="card-header" style="padding: 0.5rem 1rem; font-size: 0.82rem;">‚ö° Pulse</div>
            <div class="card-body" style="padding: 0.6rem 1rem; text-align: center;">
                <div style="font-size: 1.35rem; font-weight: bold; color: var(--primary); font-family: var(--font); line-height: 1.1;"
                     id="pulse">--:--:--</div>
                <div style="font-size: 0.72rem; color: var(--text-2); margin-top: 0.2rem;">Last sync</div>
            </div>
        </div>
    </aside>
</div>

<footer>
    <div class="footer-links">
        <a href="https://modrinth.com/user/_GodlyCow" class="footer-link" target="_blank">Modrinth Profile</a>
        <a href="https://github.com/GodlyCow203" class="footer-link" target="_blank">GitHub</a>
        <a href="https://discord.gg/vmhQ2gZr8g" class="footer-link" target="_blank">Discord</a>
        <a href="mailto:Godlycowcow@gmail.com" class="footer-link">Email</a>
    </div>
    <p>&copy; <span id="yr"></span> _GodlyCow ‚Äì Building plugins for the Minecraft community</p>
</footer>

<script>
    const themeBtn = document.getElementById('themeBtn');
    const root = document.documentElement;
    const saved = localStorage.getItem('theme') || 'dark';
    root.setAttribute('data-theme', saved);
    themeBtn.textContent = saved === 'dark' ? '‚òÄÔ∏è LIGHT' : 'üåô DARK';

    themeBtn.addEventListener('click', () => {
        const t = root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', t);
        localStorage.setItem('theme', t);
        themeBtn.textContent = t === 'dark' ? '‚òÄÔ∏è LIGHT' : 'üåô DARK';
    });

    function toggleConfig() {
        const preview = document.getElementById('config-preview');
        preview.style.display = preview.style.display === 'none' ? 'block' : 'none';
    }

    function formatFileSize(bytes) {
        if (!bytes || bytes === 'N/A') return 'N/A';
        if (bytes < 1024) return bytes + ' B';
        if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
        return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
    }

    function parseMarkdown(text) {
        if (!text) return '<p>No changelog available.</p>';

        let html = text
            .replace(/^### (.*?)$/gm, '<h3 style="margin: 0.75rem 0 0.5rem 0; color: var(--primary); font-size: 1rem;">$1</h3>')
            .replace(/^## (.*?)$/gm, '<h2 style="margin: 1rem 0 0.5rem 0; color: var(--primary); font-size: 1.1rem;">$1</h2>')
            .replace(/\*\*(.*?)\*\*/g, '<strong style="color: var(--text);">$1</strong>')
            .replace(/`(.*?)`/g, '<code style="background: var(--surface-2); padding: 0.1rem 0.3rem;">$1</code>')
            .replace(/-{3,}/g, '<hr>');

        const lines = html.split('\n');
        let inList = false;
        let result = [];

        for (let line of lines) {
            if (line.startsWith('<h2>') || line.startsWith('<h3>') || line.startsWith('<hr>')) {
                if (inList) { result.push('</ul>'); inList = false; }
                result.push(line);
                continue;
            }
            if (line.trim().startsWith('- ')) {
                if (!inList) { result.push('<ul style="margin-left: 1rem; margin-top: 0.5rem;">'); inList = true; }
                result.push(`<li style="margin-bottom: 0.25rem;">${line.trim().substring(2)}</li>`);
            } else {
                if (inList) { result.push('</ul>'); inList = false; }
                if (line.trim() !== '') result.push(`<p style="margin-bottom: 0.5rem;">${line}</p>`);
            }
        }
        if (inList) result.push('</ul>');
        return result.join('');
    }

    async function loadVersions() {
        try {
            const res = await fetch('https://api.modrinth.com/v2/project/K7HZMVgx/version');
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            const data = await res.json();

            if (!data || data.length === 0) throw new Error('No versions returned');

            const latest = data[0];
            const latestCard = document.getElementById('latestVersion');
            const file = latest.files?.[0] || {};
            const badgeType = latest.version_type === 'release' ? 'stable' : 'beta';
            const badgeText = latest.version_type === 'release' ? 'STABLE' : 'BETA';
            const gameVersions = latest.game_versions?.length ?
                `${latest.game_versions[latest.game_versions.length-1]}.x-${latest.game_versions[0]}.x` : 'N/A';

            latestCard.innerHTML = `
                <div class="version-title">${latest.name}</div>
                <div style="margin-bottom: 1rem; color: var(--text-2); font-size: 0.9rem;">
                    ${gameVersions} ‚Ä¢ ${formatFileSize(file.size)} ‚Ä¢ ${new Date(latest.date_published).toLocaleDateString()}
                </div>
                <div style="margin-bottom: 1rem;">
                    <span class="badge ${badgeType}" style="background: var(--primary); color: #000; padding: 0.2rem 0.5rem; font-size: 0.75rem; font-weight: bold;">${badgeText}</span>
                </div>
                <div class="version-changelog">
                    ${parseMarkdown(latest.changelog || 'Latest release with improvements and bug fixes.')}
                </div>
                <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                    <a href="${file.url || '#'}" class="download-btn-small" target="_blank" rel="noopener noreferrer">DOWNLOAD</a>
                    <a href="https://modrinth.com/plugin/serveressentials/version/${latest.id}" class="download-btn-small" target="_blank" rel="noopener noreferrer">VIEW ON MODRINTH</a>
                </div>
            `;

            const versionList = document.getElementById('versionList');
            const all = data.slice(0, 5);

            versionList.innerHTML = all.map(v => {
                const file = v.files?.[0] || {};
                const gameVersions = v.game_versions?.length ?
                    `${v.game_versions[v.game_versions.length-1]}.x-${v.game_versions[0]}.x` : 'N/A';

                return `
                    <div class="version-item">
                        <div class="version-info">
                            <div class="version-name">${v.name}</div>
                            <div class="version-range">${gameVersions}</div>
                        </div>
                        <div class="version-date">${new Date(v.date_published).toLocaleDateString()}</div>
                        <div style="display: flex; gap: 0.5rem;">
                            <a href="${file.url || '#'}" class="download-btn-small" target="_blank">DL</a>
                            <a href="https://modrinth.com/plugin/serveressentials/version/${v.id}" class="download-btn-small" target="_blank">INFO</a>
                        </div>
                    </div>
                `;
            }).join('');
        } catch (e) {
            console.error('Error loading versions:', e);
            document.getElementById('latestVersion').innerHTML = `<div style="color: var(--error);">Failed to load: ${e.message}</div>`;
            document.getElementById('versionList').innerHTML = `<div style="color: var(--error);">Failed to load: ${e.message}</div>`;
        }
    }

    async function loadCommits() {
        try {
            const res = await fetch('https://api.github.com/repos/GodlyCow203/ServerEssentials/commits?per_page=5');
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            const data = await res.json();

            if (!data || data.length === 0) {
                document.getElementById('github-commits').innerHTML = '<div style="text-align: center; color: var(--text-2);">No commits found</div>';
                return;
            }

            const commitsHtml = data.map(commit => {
                const message = commit.commit.message.split('\n')[0];
                const author = commit.commit.author.name;
                const date = new Date(commit.commit.author.date).toLocaleDateString();
                const sha = commit.sha.substring(0, 7);
                const url = commit.html_url;

                return `
                    <div class="commit-item">
                        <div class="commit-message"><a href="${url}" target="_blank" style="color: var(--text); text-decoration: none;">${message}</a></div>
                        <div class="commit-meta">
                            ${author} ‚Ä¢ ${date} ‚Ä¢ <span class="commit-sha">${sha}</span>
                        </div>
                    </div>
                `;
            }).join('');

            document.getElementById('github-commits').innerHTML = commitsHtml;
        } catch (e) {
            console.error('Error loading commits:', e);
            document.getElementById('github-commits').innerHTML = `<div style="color: var(--error); font-size: 0.85rem;">Failed to load commits: ${e.message}</div>`;
        }
    }

    async function loadStats() {
        try {
            const res = await fetch('https://api.modrinth.com/v2/project/K7HZMVgx');
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            const data = await res.json();
            document.getElementById('totalDownloads').textContent = data.downloads?.toLocaleString() || 'N/A';
        } catch (e) {
            console.error('Error loading stats:', e);
            document.getElementById('totalDownloads').textContent = 'N/A';
        }
    }
    (function tick() {
       const now = new Date();
       document.getElementById('pulse').textContent =
             now.toLocaleTimeString('en-GB', { hour12: false });
       setTimeout(tick, 30_000);
    })();

    document.addEventListener('DOMContentLoaded', () => {
        loadVersions();
        loadStats();
        loadCommits();
        document.getElementById('yr').textContent = new Date().getFullYear();
    });
</script>
</body>
</html>